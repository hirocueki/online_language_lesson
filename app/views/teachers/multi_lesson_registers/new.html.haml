%h1 新しいレッスン

:css
  .td_check
  {
    background-color: #FFF09E;
  }

:javascript
  (function($){
    var class_td = 'mycld_td'
    $(document).on('click','.'+class_td,function(){
      $(this).data("flag", $(this).data("flag") == 'on' ? "off" : "on")
      $(this).toggleClass('td_check')
      getDate()
    })

    var getDate = function(){
      var $div = $("#calendar")
      let ary_date = []
      $div.find("td").each(function(){
        var flag = $(this).data('flag')
        if( flag == 'on' && $(this).text() ){
          ary_date.push($(this).attr('id').replace("mycld_", ""))
        }
      })
      $("#days").val(ary_date.join(','))
    }
  })(jQuery)

= form_with(url: teachers_multi_lesson_registers_path, local: true ) do |f|
  = f.hidden_field :days, id: "days", name: "days"

  %table.table.table-bordered#calendar
    %thead
      %tr
        - @date_range.slice(0, 7).each do |day|
          %th{class: column_color( day.wday ) }
            = t('date.abbr_day_names')[day.wday]
    %tbody
      - @date_range.each_slice(7) do |week|
        %tr
          - week.each do |date|
            %td{id: "mycld_#{date.to_s}", data: {flag: "off"}, class: "#{Date.tomorrow <= date ? 'mycld_td' : ''} #{td_classes_for(date, @origin_date)} #{column_color( date.wday )}"}
              = date.day

  .form-inputs
    = f.select :language_id, current_teacher.languages.map{ |language| [language.name, language.id] }
  .form-inputs
    .row
      .col-6
        = f.select :hour,  Lesson.hour_range
  .form-inputs
    = f.text_field :zoom_url, value: "https://zoom.us/1234"
  .form-actions
    = f.button :submit, class: "btn btn-primary"

= link_to 'キャンセル', teachers_lessons_path
